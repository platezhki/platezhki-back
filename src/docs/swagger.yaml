openapi: 3.0.0
info:
  title: Platezhki Backend API
  version: 1.0.0
  description: JWT Authentication API with refresh tokens
  contact:
    name: API Support
    email: support@platezhki.com

servers:
  - url: http://localhost:3001/api
    description: Development server
  - url: https://platezhki.com/api
    description: Production server

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  
  schemas:
    User:
      type: object
      properties:
        id:
          type: integer
          example: 1
        username:
          type: string
          example: john_doe
        email:
          type: string
          format: email
          example: john@example.com
        roleId:
          type: integer
          example: 1
        isActive:
          type: boolean
          example: true
        role:
          $ref: '#/components/schemas/Role'
    
    Role:
      type: object
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: USER
    
    AuthTokens:
      type: object
      properties:
        accessToken:
          type: string
          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        refreshToken:
          type: string
          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
    PaymentService:
      type: object
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "QIWI Wallet"
        description:
          type: string
          example: "Popular Russian payment system for online transactions"
        serviceUrl:
          type: string
          format: uri
          example: "https://qiwi.com"
        establishedAt:
          type: string
          format: date-time
          example: "2007-01-01T00:00:00.000Z"
        email:
          type: string
          format: email
          example: "support@qiwi.com"
        contacts:
          type: array
          items:
            type: string
          example: ["+7-800-707-77-59", "support@qiwi.com"]
        paymentPageExampleLink:
          type: string
          format: uri
          example: "https://qiwi.com/payment-example"
        paymentPageExampleImageUrls:
          type: array
          items:
            type: string
          example: ["/uploads/payment-pages/qiwi-payment.png"]
        cabinetExampleLink:
          type: string
          format: uri
          example: "https://qiwi.com/cabinet-example"
        cabinetExampleImageUrls:
          type: array
          items:
            type: string
          example: ["/uploads/cabinets/qiwi-cabinet.png"]
        logoUrl:
          type: string
          format: uri
          example: "/uploads/logos/qiwi-logo.png"
        slug:
          type: string
          example: "qiwi-wallet"
        isActive:
          type: boolean
          example: true
        createdAt:
          type: string
          format: date-time
          example: "2024-01-01T00:00:00.000Z"
        updatedAt:
          type: string
          format: date-time
          example: "2024-01-01T00:00:00.000Z"
        countries:
          type: array
          items:
            $ref: '#/components/schemas/Country'
        currencies:
          type: array
          items:
            $ref: '#/components/schemas/Currency'
        paymentSystemTypes:
          type: array
          items:
            $ref: '#/components/schemas/PaymentSystemType'
        payInMethods:
          type: array
          items:
            $ref: '#/components/schemas/PaymentMethod'
        payOutMethods:
          type: array
          items:
            $ref: '#/components/schemas/PaymentMethod'
        supportServiceLanguages:
          type: array
          items:
            $ref: '#/components/schemas/Language'
    
    Country:
      type: object
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "Russia"
        flagUrl:
          type: string
          example: "flags/ru.png"
    
    Currency:
      type: object
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "RUB"
    
    PaymentSystemType:
      type: object
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "P2P Exchange"
    
    Offer:
      type: object
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "Premium Exchange Offer"
        slug:
          type: string
          example: "premium-exchange-offer"
        trafficVolumeMin:
          type: integer
          example: 0
        trafficVolumeMax:
          type: integer
          example: 10000
        paymentMethods:
          type: array
          items:
            $ref: '#/components/schemas/PaymentMethod'
        payInFee:
          type: number
          format: float
          example: 2.0
        payOutFee:
          type: number
          format: float
          example: 3.0
        settleSpeedId:
          type: integer
          example: 1
        payInMinLimit:
          type: number
          format: float
          example: 10.0
        payInMaxLimit:
          type: number
          format: float
          example: 5000.0
        payOutMinLimit:
          type: number
          format: float
          example: 10.0
        payOutMaxLimit:
          type: number
          format: float
          example: 5000.0
        support247:
          type: boolean
          example: true
        automatics:
          type: boolean
          example: false
        legalPerson:
          type: boolean
          example: true
        isActive:
          type: boolean
          example: true
        createdAt:
          type: string
          format: date-time
          example: "2023-01-01T00:00:00.000Z"
        updatedAt:
          type: string
          format: date-time
          example: "2023-01-01T00:00:00.000Z"
        ownerId:
          type: integer
          example: 1
        countries:
          type: array
          items:
            $ref: '#/components/schemas/Country'
        currencies:
          type: array
          items:
            $ref: '#/components/schemas/Currency'
        paymentSystemTypes:
          type: array
          items:
            $ref: '#/components/schemas/PaymentSystemType'
        trafficSources:
          type: array
          items:
            $ref: '#/components/schemas/TrafficSource'
        trafficTypes:
          type: array
          items:
            $ref: '#/components/schemas/TrafficType'
        connectionTypes:
          type: array
          items:
            $ref: '#/components/schemas/ConnectionType'
        balanceTypes:
          type: array
          items:
            $ref: '#/components/schemas/BalanceType'
    
    TrafficSource:
      type: object
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "Social Media"
        createdAt:
          type: string
          format: date-time
          example: "2023-01-01T00:00:00.000Z"
        updatedAt:
          type: string
          format: date-time
          example: "2023-01-01T00:00:00.000Z"
    
    TrafficType:
      type: object
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "Organic"
        createdAt:
          type: string
          format: date-time
          example: "2023-01-01T00:00:00.000Z"
        updatedAt:
          type: string
          format: date-time
          example: "2023-01-01T00:00:00.000Z"
    
    ConnectionType:
      type: object
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "API"
        createdAt:
          type: string
          format: date-time
          example: "2023-01-01T00:00:00.000Z"
        updatedAt:
          type: string
          format: date-time
          example: "2023-01-01T00:00:00.000Z"
    
    BalanceType:
      type: object
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "Digital"
        createdAt:
          type: string
          format: date-time
          example: "2023-01-01T00:00:00.000Z"
        updatedAt:
          type: string
          format: date-time
          example: "2023-01-01T00:00:00.000Z"
    
    OfferCreateRequest:
      type: object
      required:
        - name
        - countries
        - currencies
        - paymentSystemTypes
        - trafficVolumeMin
        - trafficVolumeMax
        - payInFee
        - payOutFee
        - payInMinLimit
        - payInMaxLimit
        - payOutMinLimit
        - payOutMaxLimit
        - support247
        - automatics
        - trafficSources
        - trafficTypes
        - connectionTypes
        - legalPerson
        - balanceTypes
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
          example: "Premium Exchange Offer"
        countries:
          type: array
          items:
            type: integer
          minItems: 1
          example: [1, 2, 3]
        currencies:
          type: array
          items:
            type: integer
          minItems: 1
          example: [1, 2]
        paymentSystemTypes:
          type: array
          items:
            type: integer
          minItems: 1
          example: [1, 2]
        trafficVolumeMin:
          type: integer
          minimum: 0
          example: 0
        trafficVolumeMax:
          type: integer
          minimum: 0
          example: 10000
        paymentMethodId:
          type: array
          items:
            type: integer
          minItems: 1
          example: [1]
        payInFee:
          type: number
          format: float
          minimum: 0
          maximum: 100
          example: 2.0
        payOutFee:
          type: number
          format: float
          minimum: 0
          maximum: 100
          example: 3.0
        settleSpeedId:
          type: integer
          minimum: 1
          example: 1
        payInMinLimit:
          type: number
          format: float
          minimum: 0
          example: 10.0
        payInMaxLimit:
          type: number
          format: float
          minimum: 0
          example: 5000.0
        payOutMinLimit:
          type: number
          format: float
          minimum: 0
          example: 10.0
        payOutMaxLimit:
          type: number
          format: float
          minimum: 0
          example: 5000.0
        support247:
          type: boolean
          example: true
        automatics:
          type: boolean
          example: false
        trafficSources:
          type: array
          items:
            type: integer
          minItems: 1
          example: [1, 2]
        trafficTypes:
          type: array
          items:
            type: integer
          minItems: 1
          example: [1, 2]
        connectionTypes:
          type: array
          items:
            type: integer
          minItems: 1
          example: [1, 2]
        balanceTypes:
          type: array
          items:
            type: integer
          minItems: 1
          example: [1, 2]
        legalPerson:
          type: boolean
          example: true
        isActive:
          type: boolean
          example: true
    
    OfferUpdateRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
          example: "Updated Premium Exchange Offer"
        countries:
          type: array
          items:
            type: integer
          minItems: 1
          example: [1, 2, 3]
        currencies:
          type: array
          items:
            type: integer
          minItems: 1
          example: [1, 2]
        paymentSystemTypes:
          type: array
          items:
            type: integer
          minItems: 1
          example: [1, 2]
        trafficVolumeMin:
          type: integer
          minimum: 0
          example: 0
        trafficVolumeMax:
          type: integer
          minimum: 0
          example: 10000
        
        payInFee:
          type: number
          format: float
          minimum: 0
          maximum: 100
          example: 2.0
        payOutFee:
          type: number
          format: float
          minimum: 0
          maximum: 100
          example: 3.0
        settleSpeedId:
          type: integer
          minimum: 1
          example: 1
        payInMinLimit:
          type: number
          format: float
          minimum: 0
          example: 10.0
        payInMaxLimit:
          type: number
          format: float
          minimum: 0
          example: 5000.0
        payOutMinLimit:
          type: number
          format: float
          minimum: 0
          example: 10.0
        payOutMaxLimit:
          type: number
          format: float
          minimum: 0
          example: 5000.0
        support247:
          type: boolean
          example: true
        automatics:
          type: boolean
          example: false
        trafficSources:
          type: array
          items:
            type: integer
          minItems: 1
          example: [1, 2]
        trafficTypes:
          type: array
          items:
            type: integer
          minItems: 1
          example: [1, 2]
        connectionTypes:
          type: array
          items:
            type: integer
          minItems: 1
          example: [1, 2]
        legalPerson:
          type: boolean
          example: true
        slug:
          type: string
          minLength: 1
          example: "updated-premium-exchange-offer"
        balanceTypes:
          type: array
          items:
            type: integer
          minItems: 1
          example: [1]
        isActive:
          type: boolean
          example: true
    
    PaymentMethod:
      type: object
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "C2C"
    
    Language:
      type: object
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "Russian"
        shortName:
          type: string
          example: "RUS"
        code:
          type: string
          example: "ru"
        flagUrl:
          type: string
          example: "flags/ru.png"
    
    PaymentServiceCreateRequest:
      type: object
      required:
        - name
        - logo
        - description
        - establishedAt
        - contacts
        - email
        - payInMethods
        - payOutMethods
        - countries
        - currencies
        - paymentSystemType
        - languageSupport
        - paymentPageExampleLink
        - cabinetExampleLink
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
          example: "QIWI Wallet"
        logo:
          type: object
          properties:
            file:
              type: string
              description: "Base64 encoded file data"
              example: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg=="
            fileName:
              type: string
              example: "logo.png"
        description:
          type: string
          maxLength: 255
          example: "Popular Russian payment system for online transactions"
        establishedAt:
          type: string
          pattern: '^\d{2}\.\d{2}\.\d{4}$'
          example: "02.03.2003"
        contacts:
          type: array
          items:
            type: string
          minItems: 1
          example: ["+7-800-707-77-59", "support@qiwi.com"]
        email:
          type: string
          format: email
          example: "support@qiwi.com"
        payInMethods:
          type: array
          items:
            type: integer
          minItems: 1
          example: [1, 2]
        payOutMethods:
          type: array
          items:
            type: integer
          minItems: 1
          example: [1]
        countries:
          type: array
          items:
            type: integer
          minItems: 1
          example: [1, 2]
        currencies:
          type: array
          items:
            type: integer
          minItems: 1
          example: [1, 5]
        paymentSystemType:
          type: array
          items:
            type: integer
          minItems: 1
          example: [1, 5]
        languageSupport:
          type: array
          items:
            type: integer
          minItems: 1
          example: [1, 2]
        paymentPageExampleLink:
          type: string
          format: uri
          example: "https://qiwi.com/payment-example"
        paymentPageExampleImageUrls:
          type: array
          items:
            type: object
            properties:
              file:
                type: string
                description: "Base64 encoded file data"
              fileName:
                type: string
          example: []
        cabinetExampleLink:
          type: string
          format: uri
          example: "https://qiwi.com/cabinet-example"
        cabinetExampleImageUrls:
          type: array
          items:
            type: object
            properties:
              file:
                type: string
                description: "Base64 encoded file data"
              fileName:
                type: string
          example: []
        isActive:
          type: boolean
          default: true
          example: true
    
    PaymentServiceUpdateRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
          example: "Updated QIWI Wallet"
        logo:
          oneOf:
            - type: object
              properties:
                file:
                  type: string
                  description: "Base64 encoded file data"
                fileName:
                  type: string
            - type: string
              format: uri
              description: "Existing logo URL"
        description:
          type: string
          maxLength: 255
          example: "Updated description"
        establishedAt:
          type: string
          pattern: '^\d{2}\.\d{2}\.\d{4}$'
          example: "02.03.2003"
        contacts:
          type: array
          items:
            type: string
          example: ["+7-800-707-77-59", "support@qiwi.com"]
        email:
          type: string
          format: email
          example: "support@qiwi.com"
        payInMethods:
          type: array
          items:
            type: integer
          example: [1, 2]
        payOutMethods:
          type: array
          items:
            type: integer
          example: [1]
        countries:
          type: array
          items:
            type: integer
          example: [1, 2]
        currencies:
          type: array
          items:
            type: integer
          example: [1, 5]
        paymentSystemType:
          type: array
          items:
            type: integer
          example: [1, 5]
        languageSupport:
          type: array
          items:
            type: integer
          example: [1, 2]
        paymentPageExampleLink:
          type: string
          format: uri
          example: "https://qiwi.com/payment-example"
        paymentPageExampleImageUrls:
          type: array
          items:
            oneOf:
              - type: object
                properties:
                  file:
                    type: string
                    description: "Base64 encoded file data"
                  fileName:
                    type: string
              - type: string
                format: uri
                description: "Existing image URL"
        cabinetExampleLink:
          type: string
          format: uri
          example: "https://qiwi.com/cabinet-example"
        cabinetExampleImageUrls:
          type: array
          items:
            oneOf:
              - type: object
                properties:
                  file:
                    type: string
                    description: "Base64 encoded file data"
                  fileName:
                    type: string
              - type: string
                format: uri
                description: "Existing image URL"
        slug:
          type: string
          example: "updated-qiwi-wallet"
        isActive:
          type: boolean
          example: true
    
    Error:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          example: Error message
    
    Success:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: Success message
        data:
          type: object
    
    Setting:
      type: object
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "site_title"
        value:
          type: string
          example: "Platezhki Platform"
        type:
          type: string
          example: "string"
        updatedBy:
          type: integer
          example: 1
        createdAt:
          type: string
          format: date-time
          example: "2024-01-01T00:00:00.000Z"
        updatedAt:
          type: string
          format: date-time
          example: "2024-01-01T00:00:00.000Z"
    
    CreateUserRequest:
      type: object
      required:
        - username
        - email
        - password
      properties:
        username:
          type: string
          minLength: 3
          example: "john_doe"
        email:
          type: string
          format: email
          example: "john@example.com"
        password:
          type: string
          minLength: 6
          example: "password123"
        roleId:
          type: integer
          minimum: 1
          default: 3
          example: 2
    
    CreateSettingRequest:
      type: object
      required:
        - name
        - value
        - type
        - updatedBy
      properties:
        name:
          type: string
          minLength: 1
          example: "site_title"
        value:
          type: string
          minLength: 1
          example: "Platezhki Platform"
        type:
          type: string
          minLength: 1
          example: "string"
        updatedBy:
          type: integer
          minimum: 1
          example: 1
    
    UpdateSettingRequest:
      type: object
      required:
        - value
        - updatedBy
      properties:
        value:
          type: string
          minLength: 1
          example: "Updated Platezhki Platform"
        type:
          type: string
          example: "string"
        updatedBy:
          type: integer
          minimum: 1
          example: 1

paths:
  /auth/login:
    post:
      summary: User login
      tags: [Authentication]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - username
                - password
              properties:
                username:
                  type: string
                  example: john_doe
                password:
                  type: string
                  example: password123
      responses:
        200:
          description: Login successful
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Success'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          user:
                            $ref: '#/components/schemas/User'
                          accessToken:
                            type: string
                            example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
                          refreshToken:
                            type: string
                            example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
              example:
                success: true
                message: "Login successful"
                data:
                  user:
                    id: 1
                    username: "john_doe"
                    email: "john@example.com"
                    roleId: 1
                    isActive: true
                    role:
                      id: 1
                      name: "USER"
                  accessToken: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                  refreshToken: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        401:
          description: Invalid credentials
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /auth/refresh:
    post:
      summary: Refresh access token
      tags: [Authentication]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - refreshToken
              properties:
                refreshToken:
                  type: string
                  example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
      responses:
        200:
          description: Token refreshed successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Success'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/AuthTokens'
              example:
                success: true
                message: "Token refreshed successfully"
                data:
                  accessToken: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                  refreshToken: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        401:
          description: Invalid or expired refresh token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /auth/logout:
    post:
      summary: User logout
      tags: [Authentication]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - refreshToken
              properties:
                refreshToken:
                  type: string
                  example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
      responses:
        200:
          description: Logout successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'
              example:
                success: true
                message: "Logout successful"

  /dictionaries:
    get:
      summary: Get all dictionaries
      tags: [Dictionaries]
      description: Returns all dictionary data as {id, name} objects for various entities
      responses:
        200:
          description: Dictionaries retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Success'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          countries:
                            type: array
                            items:
                              type: object
                              properties:
                                id:
                                  type: integer
                                name:
                                  type: string
                          currencies:
                            type: array
                            items:
                              type: object
                              properties:
                                id:
                                  type: integer
                                name:
                                  type: string
                          languages:
                            type: array
                            items:
                              type: object
                              properties:
                                id:
                                  type: integer
                                name:
                                  type: string
                          exchangeTypes:
                            type: array
                            items:
                              type: object
                              properties:
                                id:
                                  type: integer
                                name:
                                  type: string
                          connectionTypes:
                            type: array
                            items:
                              type: object
                              properties:
                                id:
                                  type: integer
                                name:
                                  type: string
                          paymentMethods:
                            type: array
                            items:
                              type: object
                              properties:
                                id:
                                  type: integer
                                name:
                                  type: string
                          trafficTypes:
                            type: array
                            items:
                              type: object
                              properties:
                                id:
                                  type: integer
                                name:
                                  type: string
                          trafficSources:
                            type: array
                            items:
                              type: object
                              properties:
                                id:
                                  type: integer
                                name:
                                  type: string
                          paymentSystemTypes:
                            type: array
                            items:
                              type: object
                              properties:
                                id:
                                  type: integer
                                name:
                                  type: string
                          balanceTypes:
                            type: array
                            items:
                              type: object
                              properties:
                                id:
                                  type: integer
                                name:
                                  type: string
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /users/me:
    get:
      summary: Get current user
      tags: [Users]
      description: Returns information about the currently authenticated user
      security:
        - bearerAuth: []
      responses:
        200:
          description: Current user retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Success'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/User'
        401:
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        404:
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /users:
    get:
      summary: Get all users
      tags: [Users]
      description: Returns a list of all users (requires authentication)
      security:
        - bearerAuth: []
      responses:
        200:
          description: Users retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Success'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/User'
        401:
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    
    patch:
      summary: Update current user
      tags: [Users]
      description: Updates information about the currently authenticated user
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                  example: "newusername"
                email:
                  type: string
                  format: email
                  example: "newemail@example.com"
                roleId:
                  type: integer
                  example: 2
      responses:
        200:
          description: User updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Success'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/User'
        400:
          description: Bad request (username/email already exists)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        401:
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        404:
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    
    put:
      summary: Create new user
      tags: [Users]
      description: Creates a new user (requires admin or moderator role)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateUserRequest'
            examples:
              basic_user:
                summary: Create basic user
                value:
                  username: "john_doe"
                  email: "john@example.com"
                  password: "password123"
                  roleId: 3
              admin_user:
                summary: Create admin user
                value:
                  username: "admin_user"
                  email: "admin@example.com"
                  password: "securepassword"
                  roleId: 1
      responses:
        201:
          description: User created successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Success'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/User'
        400:
          description: Bad request (username/email already exists or validation error)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        401:
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        403:
          description: Access denied (insufficient permissions)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /users/{id}:
    get:
      summary: Get user by ID
      tags: [Users]
      description: Returns information about a specific user by ID (requires authentication)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: User ID
          example: 1
      responses:
        200:
          description: User retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Success'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/User'
        401:
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        404:
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /roles:
    get:
      summary: Get all roles
      tags: [Roles]
      description: Returns all available roles
      security:
        - bearerAuth: []
      responses:
        200:
          description: Roles retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Success'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Role'
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

    put:
      summary: Create new role
      tags: [Roles]
      description: Creates a new role
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
                  example: "Moderator"
      responses:
        201:
          description: Role created successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Success'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Role'
        400:
          description: Bad request (role name already exists)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /roles/{id}:
    patch:
      summary: Update role
      tags: [Roles]
      description: Updates an existing role
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Role ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
                  example: "Updated Role Name"
      responses:
        200:
          description: Role updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Success'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Role'
        400:
          description: Bad request (role name already exists)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        404:
          description: Role not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /payment-services:
    put:
      summary: Create or update payment service
      tags: [Payment Services]
      description: Creates a new payment service or updates existing one by slug with file upload support
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PaymentServiceCreateRequest'
            examples:
              qiwi_wallet:
                summary: QIWI Wallet Example
                value:
                  name: "QIWI Wallet"
                  logo:
                    file: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg=="
                    fileName: "qiwi-logo.png"
                  description: "Popular Russian payment system for online transactions"
                  establishedAt: "02.03.2003"
                  contacts: ["+7-800-707-77-59", "support@qiwi.com"]
                  email: "support@qiwi.com"
                  payInMethods: [1, 2]
                  payOutMethods: [1]
                  countries: [1, 2]
                  currencies: [1, 5]
                  paymentSystemType: [1, 5]
                  languageSupport: [1, 2]
                  paymentPageExampleLink: "https://qiwi.com/payment-example"
                  paymentPageExampleImageUrls: []
                  cabinetExampleLink: "https://qiwi.com/cabinet-example"
                  cabinetExampleImageUrls: []
                  isActive: true

      responses:
        200:
          description: Payment service updated successfully
        201:
          description: Payment service created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Payment service created successfully"
                  data:
                    $ref: '#/components/schemas/PaymentService'
        400:
          description: Bad request (payment service already exists)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    get:
      summary: Get all payment services
      tags: [Payment Services]
      description: Returns paginated list of payment services with filtering and search capabilities. Supports filtering by countries, currencies, payment methods, and text search.
      security:
        - bearerAuth: []
      parameters:
          - in: query
            name: page
            schema:
              type: integer
              minimum: 1
              default: 1
            description: Page number for pagination
            required: false
          - in: query
            name: limit
            schema:
              type: integer
              minimum: 1
              maximum: 100
              default: 10
            description: Number of items per page
            required: false
          - in: query
            name: isActive
            schema:
              type: boolean
              default: true
            description: Filter by active status
            required: false
          - in: query
            name: countryId
            schema:
              type: array
              items:
                type: integer
            style: form
            explode: false
            description: Filter by country IDs
            required: false
            example: [1, 2, 3]
          - in: query
            name: currencyId
            schema:
              type: array
              items:
                type: integer
            style: form
            explode: false
            description: Filter by currency IDs
            required: false
            example: [1, 5]
          - in: query
            name: paymentMethodId
            schema:
              type: array
              items:
                type: integer
            style: form
            explode: false
            description: Filter by payment method IDs (both pay-in and pay-out methods)
            required: false
            example: [1, 2]
          - in: query
            name: q
            schema:
              type: string
            description: Search query for payment service name
            required: false
            example: "QIWI"
      examples:
        basic_list:
          summary: Basic List
          description: Get first page of active payment services
          value:
            page: 1
            limit: 10
            isActive: true
        filtered_list:
          summary: Filtered List
          description: Get payment services for specific countries and currencies
          value:
            page: 1
            limit: 20
            countryId: [1, 2]
            currencyId: [1, 5]
            isActive: true
        search_list:
          summary: Search Results
          description: Search for payment services by name
          value:
            q: "QIWI"
            isActive: true
      responses:
        200:
          description: Payment services retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Payment services retrieved successfully"
                  data:
                    type: array
                    items:
                      allOf:
                        - $ref: '#/components/schemas/PaymentService'
                        - type: object
                          properties:
                            countries:
                              type: array
                              items:
                                $ref: '#/components/schemas/Country'
                            currencies:
                              type: array
                              items:
                                $ref: '#/components/schemas/Currency'
                            paymentSystemTypes:
                              type: array
                              items:
                                $ref: '#/components/schemas/PaymentSystemType'
                            payInMethods:
                              type: array
                              items:
                                allOf:
                                  - $ref: '#/components/schemas/PaymentMethod'
                                  - type: object
                                    properties:
                                      methodType:
                                        type: string
                                        enum: [payIn]
                            payOutMethods:
                              type: array
                              items:
                                allOf:
                                  - $ref: '#/components/schemas/PaymentMethod'
                                  - type: object
                                    properties:
                                      methodType:
                                        type: string
                                        enum: [payOut]
                            supportServiceLanguages:
                              type: array
                              items:
                                $ref: '#/components/schemas/Language'
                  pagination:
                    type: object
                    properties:
                      page:
                        type: integer
                        example: 1
                      limit:
                        type: integer
                        example: 10
                      total:
                        type: integer
                        example: 100
                      pages:
                        type: integer
                        example: 10
                  filters:
                    type: array
                    items:
                      type: string
                    example: ["isActive", "countryId"]
          500:
            description: Server error
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Error'

  /payment-services/{id}:
    get:
      summary: Get payment service by id
      tags: [Payment Services]
      description: Returns a payment service by id
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Payment service id
      responses:
          200:
            description: Payment service retrieved successfully
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    success:
                      type: boolean
                      example: true
                    message:
                      type: string
                      example: "Payment service retrieved successfully"
                    data:
                      allOf:
                        - $ref: '#/components/schemas/PaymentService'
                        - type: object
                          properties:
                            countries:
                              type: array
                              items:
                                $ref: '#/components/schemas/Country'
                            currencies:
                              type: array
                              items:
                                $ref: '#/components/schemas/Currency'
                            paymentSystemTypes:
                              type: array
                              items:
                                $ref: '#/components/schemas/PaymentSystemType'
                            payInMethods:
                              type: array
                              items:
                                allOf:
                                  - $ref: '#/components/schemas/PaymentMethod'
                                  - type: object
                                    properties:
                                      methodType:
                                        type: string
                                        enum: [payIn]
                            payOutMethods:
                              type: array
                              items:
                                allOf:
                                  - $ref: '#/components/schemas/PaymentMethod'
                                  - type: object
                                    properties:
                                      methodType:
                                        type: string
                                        enum: [payOut]
                            supportServiceLanguages:
                              type: array
                              items:
                                $ref: '#/components/schemas/Language'
          404:
            description: Payment service not found
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Error'

          500:
            description: Server error
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Error'
    
    patch:
      summary: Update payment service
      tags: [Payment Services]
      description: Updates an existing payment service with partial data
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Payment service id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PaymentServiceUpdateRequest'
            examples:
              update_basic:
                summary: Update Basic Fields
                value:
                  name: "Updated QIWI Wallet"
                  description: "Updated description for QIWI Wallet"
                  email: "new-support@qiwi.com"
              update_with_logo:
                summary: Update with New Logo
                value:
                  logo:
                    file: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg=="
                    fileName: "new-logo.png"
              update_with_existing_logo:
                summary: Update with Existing Logo URL
                value:
                  logo: "https://example.com/existing-logo.png"
              update_relations:
                summary: Update Relations
                value:
                  countries: [1, 2, 3]
                  currencies: [1, 5]
                  paymentSystemType: [1, 2]
                  payInMethods: [1, 2, 3]
                  payOutMethods: [1, 2]
                  languageSupport: [1, 2, 3]
              update_slug:
                summary: Update with Custom Slug
                value:
                  name: "New Service Name"
                  slug: "custom-service-slug"
      responses:
        200:
          description: Payment service updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Payment service updated successfully"
                  data:
                    $ref: '#/components/schemas/PaymentService'
        400:
          description: Bad request (validation error or conflict)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              examples:
                validation_error:
                  summary: Validation Error
                  value:
                    success: false
                    message: "Name is required"
                conflict_error:
                  summary: Conflict Error
                  value:
                    success: false
                    message: "Payment service with this name already exists"
        404:
          description: Payment service not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    
    delete:
      summary: Delete payment service
      tags: [Payment Services]
      description: Deletes an existing payment service by id. This operation is irreversible.
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Payment service id
      responses:
        200:
          description: Payment service deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Payment service deleted successfully"
        404:
          description: Payment service not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /payment-services/{id}/activate:
    post:
      summary: Activate payment service
      tags: [Payment Services]
      description: Activates an existing payment service by setting isActive to true
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Payment service id
      responses:
        200:
          description: Payment service activated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Payment service activated successfully"
                  data:
                    $ref: '#/components/schemas/PaymentService'
        400:
          description: Bad request (payment service already active)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                success: false
                message: "Payment service is already active"
        404:
          description: Payment service not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /payment-services/{id}/deactivate:
    post:
      summary: Deactivate payment service
      tags: [Payment Services]
      description: Deactivates an existing payment service by setting isActive to false
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Payment service id
      responses:
        200:
          description: Payment service deactivated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Payment service deactivated successfully"
                  data:
                    $ref: '#/components/schemas/PaymentService'
        400:
          description: Bad request (payment service already inactive)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                success: false
                message: "Payment service is already inactive"
        404:
          description: Payment service not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /payment-services/slug/{slug}:
    get:
      summary: Get payment service by slug
      tags: [Payment Services]
      description: Returns a payment service by its slug. This is useful for public access to payment services using their URL-friendly identifier.
      parameters:
        - in: path
          name: slug
          required: true
          schema:
            type: string
          description: Payment service slug
          example: "qiwi-wallet"
      responses:
        200:
          description: Payment service retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Payment service retrieved successfully"
                  data:
                    allOf:
                      - $ref: '#/components/schemas/PaymentService'
                      - type: object
                        properties:
                          countries:
                            type: array
                            items:
                              $ref: '#/components/schemas/Country'
                          currencies:
                            type: array
                            items:
                              $ref: '#/components/schemas/Currency'
                          paymentSystemTypes:
                            type: array
                            items:
                              $ref: '#/components/schemas/PaymentSystemType'
                          payInMethods:
                            type: array
                            items:
                              allOf:
                                - $ref: '#/components/schemas/PaymentMethod'
                                - type: object
                                  properties:
                                    methodType:
                                      type: string
                                      enum: [payIn]
                          payOutMethods:
                            type: array
                            items:
                              allOf:
                                - $ref: '#/components/schemas/PaymentMethod'
                                - type: object
                                  properties:
                                    methodType:
                                      type: string
                                      enum: [payOut]
                          supportServiceLanguages:
                            type: array
                            items:
                              $ref: '#/components/schemas/Language'
                          offers:
                            type: array
                            items:
                              $ref: '#/components/schemas/Offer'
        404:
          description: Payment service not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /payment-services/my:
    get:
      summary: Get current user's payment service
      tags: [Payment Services]
      description: Returns the payment service owned by the current authenticated user. Since one user can have only one payment service, this returns a single service or null.
      security:
        - bearerAuth: []
      responses:
        200:
          description: Payment service retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Payment service retrieved successfully"
                  data:
                    $ref: '#/components/schemas/PaymentService'
        401:
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        404:
          description: Payment service not found (user has no payment service)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /offers:
    get:
      summary: Get offers
      tags: [Offers]
      description: Returns a paginated list of offers with optional filtering
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
          description: Number of items per page
        - in: query
          name: isActive
          schema:
            type: boolean
            default: true
          description: Filter by active status
        - in: query
          name: countryId
          schema:
            type: array
            items:
              type: integer
          description: Filter by country IDs
        - in: query
          name: currencyId
          schema:
            type: array
            items:
              type: integer
          description: Filter by currency IDs
        - in: query
          name: paymentMethodId
          schema:
            type: array
            items:
              type: integer
          description: Filter by payment method IDs
        - in: query
          name: paymentSystemTypeId
          schema:
            type: array
            items:
              type: integer
          description: Filter by payment system type IDs
        - in: query
          name: trafficSourceId
          schema:
            type: array
            items:
              type: integer
          description: Filter by traffic source IDs
        - in: query
          name: trafficTypeId
          schema:
            type: array
            items:
              type: integer
          description: Filter by traffic type IDs
        - in: query
          name: connectionTypeId
          schema:
            type: array
            items:
              type: integer
          description: Filter by connection type IDs
        - in: query
          name: q
          schema:
            type: string
          description: Search by offer name
        - in: query
          name: sort_column
          schema:
            type: string
            enum: [name, id, createdAt]
            default: name
          description: Column to sort by
        - in: query
          name: order
          schema:
            type: string
            enum: [asc, desc]
            default: asc
          description: Sort order
      responses:
        200:
          description: Offers retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Offers retrieved successfully"
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Offer'
                  pagination:
                    type: object
                    properties:
                      page:
                        type: integer
                        example: 1
                      limit:
                        type: integer
                        example: 10
                      total:
                        type: integer
                        example: 25
                      pages:
                        type: integer
                        example: 3
                  filters:
                    type: array
                    items:
                      type: string
                    example: ["isActive", "countryId"]
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    
    put:
      summary: Create offer
      tags: [Offers]
      description: Creates a new offer (requires authentication)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OfferCreateRequest'
            examples:
              basic_offer:
                summary: Basic offer
                value:
                  name: "Premium Exchange Offer"
                  countries: [1, 2, 3]
                  currencies: [1, 2]
                  paymentSystemTypes: [1, 2]
                  trafficVolumeMin: 0
                  trafficVolumeMax: 10000
                  paymentMethodId: [1]
                  payInFee: 2.0
                  payOutFee: 3.0
                  settleSpeedId: 1
                  payInMinLimit: 10.0
                  payInMaxLimit: 5000.0
                  payOutMinLimit: 10.0
                  payOutMaxLimit: 5000.0
                  support247: true
                  automatics: false
                  trafficSources: [1, 2]
                  trafficTypes: [1, 2]
                  connectionTypes: [1, 2]
                  balanceTypes: [1, 2]
                  legalPerson: true
                  isActive: true
      responses:
        201:
          description: Offer created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Offer created successfully"
                  data:
                    $ref: '#/components/schemas/Offer'
        400:
          description: Validation error or offer already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        401:
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /offers/filter:
    get:
      summary: Filter offers and get payment services
      tags: [Offers]
      description: Filters offers based on criteria and returns payment services that have matching offers
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
            default: 1
          description: Page number for pagination
        - in: query
          name: limit
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
          description: Number of items per page
        - in: query
          name: countries
          schema:
            type: array
            items:
              type: integer
          description: Filter by country IDs
          example: [1, 2, 3]
        - in: query
          name: currencies
          schema:
            type: array
            items:
              type: integer
          description: Filter by currency IDs
          example: [1, 2]
        - in: query
          name: paymentSystemTypes
          schema:
            type: array
            items:
              type: integer
          description: Filter by payment system type IDs
          example: [1, 2]
        - in: query
          name: trafficSources
          schema:
            type: array
            items:
              type: integer
          description: Filter by traffic source IDs
          example: [1, 2]
        - in: query
          name: trafficTypes
          schema:
            type: array
            items:
              type: integer
          description: Filter by traffic type IDs
          example: [1, 2]
        - in: query
          name: connectionTypes
          schema:
            type: array
            items:
              type: integer
          description: Filter by connection type IDs
          example: [1, 2]
        - in: query
          name: balanceTypes
          schema:
            type: array
            items:
              type: integer
          description: Filter by balance type IDs
          example: [1, 2]
        - in: query
          name: support247
          schema:
            type: array
            items:
              type: integer
              enum: [1, 2]
          description: Filter by 24/7 support (1=yes, 2=doesn't matter)
          example: [1]
        - in: query
          name: automatics
          schema:
            type: array
            items:
              type: integer
              enum: [1, 2]
          description: Filter by automatics (1=yes, 2=doesn't matter)
          example: [1]
        - in: query
          name: legalPerson
          schema:
            type: array
            items:
              type: integer
              enum: [1, 2]
          description: Filter by legal person (1=yes, 2=no)
          example: [1]
        - in: query
          name: payInFee
          schema:
            type: number
            format: float
          description: Filter by pay-in fee
          example: 2.0
        - in: query
          name: payOutFee
          schema:
            type: number
            format: float
          description: Filter by pay-out fee
          example: 3.0
        - in: query
          name: payInMinLimit
          schema:
            type: number
            format: float
          description: Filter by minimum pay-in limit
          example: 10.0
        - in: query
          name: payInMaxLimit
          schema:
            type: number
            format: float
          description: Filter by maximum pay-in limit
          example: 5000.0
        - in: query
          name: payOutMinLimit
          schema:
            type: number
            format: float
          description: Filter by minimum pay-out limit
          example: 10.0
        - in: query
          name: payOutMaxLimit
          schema:
            type: number
            format: float
          description: Filter by maximum pay-out limit
          example: 5000.0
        - in: query
          name: payOutLimits
          schema:
            type: number
            format: float
          description: Filter by pay-out limits (legacy field)
          example: 1000.0
        - in: query
          name: q
          schema:
            type: string
          description: Search offers by name (case-insensitive)
          example: "premium"
      responses:
        200:
          description: Payment services with matching offers retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Payment services retrieved successfully"
                  data:
                    type: array
                    items:
                      allOf:
                        - $ref: '#/components/schemas/PaymentService'
                        - type: object
                          properties:
                            offers:
                              type: array
                              items:
                                $ref: '#/components/schemas/Offer'
                  pagination:
                    type: object
                    properties:
                      page:
                        type: integer
                        example: 1
                      limit:
                        type: integer
                        example: 10
                      total:
                        type: integer
                        example: 5
                      pages:
                        type: integer
                        example: 1
                  filters:
                    type: array
                    items:
                      type: string
                    example: ["countries", "paymentSystemTypes", "legalPerson"]
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /offers/ranges:
    get:
      summary: Get offer ranges
      tags: [Offers]
      description: Returns min and max values for all numeric offer fields (traffic volume, fees, and limits)
      responses:
        200:
          description: Offer ranges retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Offer ranges retrieved successfully"
                  data:
                    type: object
                    properties:
                      trafficVolume:
                        type: object
                        properties:
                          min:
                            type: number
                            nullable: true
                            example: 100
                          max:
                            type: number
                            nullable: true
                            example: 10000
                      payInFee:
                        type: object
                        properties:
                          min:
                            type: number
                            nullable: true
                            example: 1
                          max:
                            type: number
                            nullable: true
                            example: 5
                      payOutFee:
                        type: object
                        properties:
                          min:
                            type: number
                            nullable: true
                            example: 2
                          max:
                            type: number
                            nullable: true
                            example: 8
                      payInLimit:
                        type: object
                        properties:
                          min:
                            type: number
                            nullable: true
                            example: 10
                          max:
                            type: number
                            nullable: true
                            example: 100000
                      payOutLimit:
                        type: object
                        properties:
                          min:
                            type: number
                            nullable: true
                            example: 20
                          max:
                            type: number
                            nullable: true
                            example: 50000
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /offers/my:
    get:
      summary: Get current user offers
      tags: [Offers]
      description: Returns offers for the authenticated user
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
          description: Number of items per page
        - in: query
          name: isActive
          schema:
            type: boolean
          description: Filter by active status
        - in: query
          name: currencyId
          schema:
            type: string
          description: Filter by currency IDs (comma-separated, e.g., "1,2,3")
        - in: query
          name: q
          schema:
            type: string
          description: Search offers by name (case-insensitive)
        - in: query
          name: sort_column
          schema:
            type: string
            enum: [name, id, createdAt]
            default: name
          description: Column to sort by
        - in: query
          name: order
          schema:
            type: string
            enum: [asc, desc]
            default: asc
          description: Sort order
      responses:
        200:
          description: User offers retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Offers retrieved successfully"
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Offer'
                  pagination:
                    type: object
                    properties:
                      page:
                        type: integer
                        example: 1
                      limit:
                        type: integer
                        example: 10
                      total:
                        type: integer
                        example: 5
                      pages:
                        type: integer
                        example: 1
        401:
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /offers/slug/{slug}:
    get:
      summary: Get offer by slug
      tags: [Offers]
      description: Returns an offer by its slug
      parameters:
        - in: path
          name: slug
          required: true
          schema:
            type: string
          description: Offer slug
          example: "premium-exchange-offer"
      responses:
        200:
          description: Offer retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Offer retrieved successfully"
                  data:
                    $ref: '#/components/schemas/Offer'
        404:
          description: Offer not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /offers/{id}:
    get:
      summary: Get offer by ID
      tags: [Offers]
      description: Returns an offer by its ID
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Offer ID
          example: 1
      responses:
        200:
          description: Offer retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Offer retrieved successfully"
                  data:
                    $ref: '#/components/schemas/Offer'
        404:
          description: Offer not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    
    patch:
      summary: Update offer
      tags: [Offers]
      description: Updates an existing offer (requires authentication and ownership or admin role)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Offer ID
          example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OfferUpdateRequest'
            examples:
              update_basic:
                summary: Update basic fields
                value:
                  name: "Updated Premium Exchange Offer"
                  payInFee: 3.0
                  payOutFee: 3.5
                  payInMinLimit: 50.0
                  payInMaxLimit: 10000.0
                  payOutMinLimit: 50.0
                  payOutMaxLimit: 10000.0
              update_relations:
                summary: Update relations
                value:
                  countries: [1, 2]
                  currencies: [1]
                  paymentSystemTypes: [1]
                  trafficSources: [1]
                  trafficTypes: [1]
                  connectionTypes: [1]
                  balanceTypes: [1, 2]
              update_fees_and_limits:
                summary: Update fees and limits
                value:
                  payInFee: 3.0
                  payOutFee: 3.5
                  payInMinLimit: 100.0
                  payInMaxLimit: 50000.0
                  payOutMinLimit: 100.0
                  payOutMaxLimit: 50000.0
              update_boolean_fields:
                summary: Update boolean fields
                value:
                  support247: false
                  automatics: true
                  legalPerson: false
                  isActive: false
              update_complete:
                summary: Update all fields and relations
                value:
                  name: "Complete Updated Premium Exchange Offer"
                  countries: [1, 2, 3, 4]
                  currencies: [1, 2, 3]
                  paymentSystemTypes: [1, 2, 3]
                  trafficVolumeMin: 100
                  trafficVolumeMax: 50000
                  payInFee: 1.5
                  payOutFee: 2.0
                  payInMinLimit: 25.0
                  payInMaxLimit: 25000.0
                  payOutMinLimit: 25.0
                  payOutMaxLimit: 25000.0
                  support247: true
                  automatics: true
                  trafficSources: [1, 2, 3]
                  trafficTypes: [1, 2, 3]
                  connectionTypes: [1, 2, 3]
                  balanceTypes: [1, 2, 3]
                  legalPerson: true
                  isActive: true
      responses:
        200:
          description: Offer updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Offer updated successfully"
                  data:
                    $ref: '#/components/schemas/Offer'
        400:
          description: Validation error or offer already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        401:
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        403:
          description: Access denied (not owner or admin)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        404:
          description: Offer not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    
    delete:
      summary: Delete offer
      tags: [Offers]
      description: Deletes an offer (requires authentication and ownership or admin role)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Offer ID
          example: 1
      responses:
        200:
          description: Offer deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Offer deleted successfully"
        401:
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        403:
          description: Access denied (not owner or admin)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        404:
          description: Offer not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /offers/{id}/activate:
    post:
      summary: Activate offer
      tags: [Offers]
      description: Activates an offer (requires authentication and ownership or admin role)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Offer ID
          example: 1
      responses:
        200:
          description: Offer activated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Offer activated successfully"
                  data:
                    $ref: '#/components/schemas/Offer'
        400:
          description: Offer already active
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        401:
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        403:
          description: Access denied (not owner or admin)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        404:
          description: Offer not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /offers/{id}/deactivate:
    post:
      summary: Deactivate offer
      tags: [Offers]
      description: Deactivates an offer (requires authentication and ownership or admin role)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Offer ID
          example: 1
      responses:
        200:
          description: Offer deactivated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Offer deactivated successfully"
                  data:
                    $ref: '#/components/schemas/Offer'
        400:
          description: Offer already inactive
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        401:
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        403:
          description: Access denied (not owner or admin)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        404:
          description: Offer not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /settings:
    get:
      summary: Get all settings
      tags: [Settings]
      description: Returns a paginated list of all settings
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
            default: 1
          description: Page number for pagination
          required: false
        - in: query
          name: limit
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
          description: Number of items per page
          required: false
        - in: query
          name: name
          schema:
            type: string
          description: Filter by setting name
          required: false
      responses:
        200:
          description: Settings retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Success'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Setting'
                      pagination:
                        type: object
                        properties:
                          page:
                            type: integer
                            example: 1
                          limit:
                            type: integer
                            example: 10
                          total:
                            type: integer
                            example: 25
                          pages:
                            type: integer
                            example: 3
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    
    post:
      summary: Create new setting
      tags: [Settings]
      description: Creates a new system setting
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSettingRequest'
            examples:
              string_setting:
                summary: String setting
                value:
                  name: "site_title"
                  value: "Platezhki Platform"
                  type: "string"
                  updatedBy: 1
              number_setting:
                summary: Number setting
                value:
                  name: "max_upload_size"
                  value: "10485760"
                  type: "number"
                  updatedBy: 1
              boolean_setting:
                summary: Boolean setting
                value:
                  name: "maintenance_mode"
                  value: "false"
                  type: "boolean"
                  updatedBy: 1
      responses:
        201:
          description: Setting created successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Success'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Setting'
        400:
          description: Bad request (setting already exists or validation error)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /settings/{id}:
    get:
      summary: Get setting by ID
      tags: [Settings]
      description: Returns a specific setting by its ID
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Setting ID
          example: 1
      responses:
        200:
          description: Setting retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Success'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Setting'
        404:
          description: Setting not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    
    put:
      summary: Update setting
      tags: [Settings]
      description: Updates an existing setting by its ID
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Setting ID
          example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateSettingRequest'
            examples:
              update_value:
                summary: Update setting value
                value:
                  value: "Updated Platezhki Platform"
                  updatedBy: 1
              update_with_type:
                summary: Update value and type
                value:
                  value: "New Value"
                  type: "string"
                  updatedBy: 1
      responses:
        200:
          description: Setting updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Success'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Setting'
        400:
          description: Bad request (validation error)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        404:
          description: Setting not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /settings/name/{name}:
    get:
      summary: Get setting by name
      tags: [Settings]
      description: Returns a specific setting by its name
      parameters:
        - in: path
          name: name
          required: true
          schema:
            type: string
          description: Setting name
          example: "site_title"
      responses:
        200:
          description: Setting retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Success'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Setting'
        404:
          description: Setting not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'